/*! jquery.avgrund - v1.3.3 (http://labs.voronianski.com/jquery.avgrund.js) */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function($){$.fn.avgrund=function(a){var b={width:380,height:280,showClose:!1,showCloseText:"",closeByEscape:!0,closeByDocument:!0,windowScrollable:!1,holderClass:"",overlayClass:"",enableStackAnimation:!1,onBlurContainer:"",openOnEvent:!0,setEvent:"click",onLoad:!1,onUnload:!1,onClosing:!1,template:"<p>This is test popin content!</p>"};return a=$.extend(b,a),this.each(function(){function b(b){a.closeByEscape&&27===b.keyCode&&e()}function c(b){a.closeByDocument?$(b.target).is(".avgrund-overlay, .avgrund-close")&&(b.preventDefault(),e()):$(b.target).is(".avgrund-close")&&(b.preventDefault(),e())}function d(){var d={};if("function"==typeof a.onLoad&&a.onLoad(f),setTimeout(function(){g.addClass("avgrund-active")},100),a.useTemplateTag?(d=$(a.templateTag),d.css({display:"block"}).addClass("avgrund-popin")):(d=$('<div class="avgrund-popin '+a.holderClass+'"></div>'),d.append(j),g.append(d)),a.windowScrollable){var e=$(window),k=e.scrollTop(),l=e.height(),m=e.width(),n=new RegExp("([0-9]*)(%)"),o=n.exec(a.width),p=n.exec(a.height);h=o?o[1]*m/100:a.height,i=p?p[1]*l/100:a.height,d.css({top:k+l/2,width:h+"px",height:i+"px","margin-left":"-"+(h/2+10)+"px","margin-top":"-"+(i/2+10)+"px"}),$(".avgrund-overlay").css({height:2*l+"px",width:2*m+"px",top:k-l/2+"px",left:-m/2+"px"})}else d.css({width:h+"px",height:i+"px","margin-left":"-"+(h/2+10)+"px","margin-top":"-"+(i/2+10)+"px"});a.showClose&&d.append('<a href="#" class="avgrund-close">'+a.showCloseText+"</a>"),a.enableStackAnimation&&d.addClass("stack"),g.bind("keyup",b).bind("click",c)}function e(){return"function"!=typeof a.onClosing||a.onClosing(f)?(g.unbind("keyup",b).unbind("click",c).removeClass("avgrund-active"),$(".avgrund-overlay.absolute-overlay").css({height:"0px",top:"0px"}),a.useTemplateTag?$(a.templateTag).css({display:"none"}):setTimeout(function(){$(".avgrund-popin").remove()},500),void("function"==typeof a.onUnload&&a.onUnload(f))):!1}var f=$(this),g=$("body"),h=a.width>640?640:a.width,i=a.height>350?350:a.height,j="function"==typeof a.template?a.template(f):a.template;g.addClass("avgrund-ready"),0===$(".avgrund-overlay").length&&g.append('<div class="avgrund-overlay '+a.overlayClass+'"></div>'),a.windowScrollable?$(".avgrund-overlay").addClass("absolute-overlay"):($("html").addClass("avgrund-html-base"),$("body").addClass("avgrund-html-base")),a.useTemplateTag&&$(a.templateTag).css({display:"none"}),""!==a.onBlurContainer&&$(a.onBlurContainer).addClass("avgrund-blur"),a.openOnEvent?f.bind(a.setEvent,function(a){a.stopPropagation(),$(a.target).is("a")&&a.preventDefault(),d()}):d()})}});